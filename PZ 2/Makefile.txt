# Makefile для Fedora с ядром 6.17
obj-m := simple.o

KDIR ?= /usr/src/kernels/6.17.1-300.fc43.x86_64
PWD := $(shell pwd)

all:
	$(MAKE) -C $(KDIR) M=$(PWD) modules

clean:
	$(MAKE) -C $(KDIR) M=$(PWD) clean

install:
	sudo insmod simple.ko
	sudo dmesg | tail -5

remove:
	sudo rmmod simple
	sudo dmesg | tail -5

help:
	@echo "Targets:"
	@echo "  all     - Build module"
	@echo "  clean   - Clean build files"
	@echo "  install - Load module"
	@echo "  remove  - Unload module"
